$def with (folders, subtypes, ratings, form)
$:{TITLE("Visual Artwork", "Submit", "/submit")}

<div id="submit-visual-content" class="content">

  <form id="submit-form" name="submitvisual" class="form clear" action="/submit/visual" method="post" enctype="multipart/form-data">
    $:{CSRF()}

    <div class="column files">
      <h3>Files</h3>

      <label for="submitfile">Submission</label>
      $if form.imageURL:
        <div style="text-overflow: ellipsis; overflow: hidden; white-space: nowrap">
          Downloading from <strong title="${form.imageURL}">${form.imageURL}</strong>
        </div>
        <input type="hidden" name="imageURL" value="${form.imageURL}" />
      $else:
        <input type="file" name="submitfile" id="submitfile" class="styled-input" accept="image/*" />
      <p class="color-lighter" style="padding-top: 0.5em;"><i>Limit (JPG): 10 MB</i></p>
      <p class="color-lighter" style="padding-top: 0.5em;"><i>Limit (PNG): 10 MB</i></p>
      <p class="color-lighter" style="padding-top: 0.5em;"><i>Limit (GIF): 10 MB</i></p>

      <label for="thumbfile">Thumbnail</label>
      <input type="file" name="thumbfile" id="thumbfile" class="styled-input" accept="image/*" />

      <a id="wesley-collections" href="/help/collections" target="_blank"><img src="${CDNIFY('/static/images/wesley-collections.png')}" alt="Not your work? Click me to learn about collections" /></a>
    </div><!-- /files -->

    <div class="column info">
      <h3>Information</h3>

      <label for="submissiontitle">Title</label>
      <input type="text" class="input" name="title" value="${form.title}" id="submissiontitle" maxlength="200" />

      <label for="submissioncat">Subcategory</label>
      <select name="subtype" class="input" id="submissioncat">
        <option value="" selected="selected">&nbsp;</option>
        $for i in subtypes:
          <option value="${i[0]}">${i[1]}</option>
      </select>

      <label for="submissionfolder">Folder</label>
      <select name="folderid" class="input" id="submissionfolder">
        <option value="" selected="selected">&nbsp;</option>
        $for i in folders:
          <option value="${i['folderid']}">${i['title']}</option>
      </select>

      <label for="submissionrating">Rating</label>
      <select name="rating" class="input" id="submissionrating">
        <option value="" selected="selected">&nbsp;</option>
        $for rating in ratings:
          <option value="${rating.code}">${rating.name_with_age}</option>
      </select>
      <p class="color-lighter tags-help"><i>Please apply a rating to this submission according to our <a href="/help/ratings" target="_blank">ratings guidelines</a>.</i></p>
      <p class="tags-help"><i>
        Note that at most three submissions per user will be shown on the
        Weasyl homepage. If a user has more than three submissions that would
        be shown, the most recently submitted three will be displayed.
      </i></p>
    </div><!-- /info -->

    <div class="column description">
      <h3>Description</h3>
      <label for="submissiondesc">Description</label>
      <textarea name="content" class="markdown input expanding" rows="9" id="submissiondesc">${form.description.strip()}</textarea>
    </div><!-- /description -->

    <div class="column tagging">
      <h3>Tags</h3>
      <textarea name="tags" class="input" rows="3" id="tags-textarea">${' '.join(form.tags)}</textarea>
      <p class="color-lighter tags-help"><i>When tagging, make sure to describe your submission thoroughly (for example, if it contains a certain type of character, use tags such as anthro, human, or robot). Separate tags with a space. Use an underscore for multiple words in a tag, ex. red_fox</i></p>
    </div><!-- /tagging -->

    <div class="column options">
      <h3>Additional Options</h3>

      <label class="input-checkbox">
        <input type="checkbox" name="customthumb" />
        Use Weasyl to create a custom thumbnail
      </label>

      <label for="submit-critique" class="input-checkbox">
        <input type="checkbox" name="critique" id="submit-critique" />
        Flag this submission for critique
      </label>

      <label for="submit-friends" class="input-checkbox">
        <input type="checkbox" name="friends" id="submit-friends" />
        Make this submission visible only to my friends
      </label>

      <label for="nonotifcation" class="input-checkbox last-input">
        <input type="checkbox" name="nonotification" id="nonotifcation" />
        Don't generate notifications for my followers for this submission
      </label>

    </div><!-- /options -->

    <div class="buttons clear">
      <button type="submit" class="button positive" style="float: right;">Continue</button>
      <a class="button" href="/index">Return Home</a>
    </div><!-- /buttons -->

  </form>
</div><!-- /submit-visual-content -->
